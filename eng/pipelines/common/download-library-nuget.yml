parameters:
  id: ''
  version: ''
  sources: [ 'https://api.nuget.org/v3/index.json' ]

steps:
  - task: NuGetCommand@2
    displayName: Download ${{ parameters.id }}
    inputs:
      command: custom
      arguments: >-
        install ${{ parameters.id }} -Prerelease -Version ${{ parameters.version }}
        -OutputDirectory $(Build.StagingDirectory)\additional-library-packs
        -Source ${{ join(' -Source ', parameters.sources) }}
  - task: CopyFiles@2
    inputs:
      sourceFolder: $(Build.StagingDirectory)\additional-library-packs
      contents: '**\${{ parameters.id }}.nupkg'
      targetFolder: $(Build.StagingDirectory)\nugets\signed
      flattenFolders: true
